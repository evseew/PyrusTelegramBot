# üß™ –¢–ï–°–¢–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –î–õ–Ø –ë–´–°–¢–†–û–ô –ü–†–û–í–ï–†–ö–ò

## –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### üöÄ –í–∞—Ä–∏–∞–Ω—Ç 1: –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5-10 –º–∏–Ω—É—Ç)
```env
# –¢–∞–π–º–∏–Ω–≥ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (–≤ —á–∞—Å–∞—Ö, –º–æ–∂–Ω–æ –¥—Ä–æ–±–∏)
DELAY_HOURS=0.02                   # 1.2 –º–∏–Ω—É—Ç—ã –¥–æ –ø–µ—Ä–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
REPEAT_INTERVAL_HOURS=0.03         # 1.8 –º–∏–Ω—É—Ç—ã –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏
TTL_HOURS=0.1                      # 6 –º–∏–Ω—É—Ç –æ–±—â–µ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏

# –¢–∏—Ö–∏–µ —á–∞—Å—ã –û–¢–ö–õ–Æ–ß–ï–ù–´ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (–≤–µ—Å—å –¥–µ–Ω—å –∞–∫—Ç–∏–≤–µ–Ω)
QUIET_START=23:59                  # –¢–∏—Ö–∏–µ —á–∞—Å—ã –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞
QUIET_END=23:58                    # –í—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω–æ

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ
TZ=Asia/Yekaterinburg
TRUNC_TASK_TITLE_LEN=50
TRUNC_COMMENT_LEN=50
QUEUE_TOP_N=10
```

### ‚ö° –í–∞—Ä–∏–∞–Ω—Ç 2: –°—É–ø–µ—Ä-–±—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –º–∏–Ω—É—Ç—ã)
```env
# –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ –¥–ª—è –¥–µ–º–æ
DELAY_HOURS=0.005                  # 18 —Å–µ–∫—É–Ω–¥ –¥–æ –ø–µ—Ä–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è!
REPEAT_INTERVAL_HOURS=0.01         # 36 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏
TTL_HOURS=0.05                     # 3 –º–∏–Ω—É—Ç—ã –æ–±—â–µ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏

# –¢–∏—Ö–∏–µ —á–∞—Å—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã
QUIET_START=23:59
QUIET_END=23:58
```

### üéØ –í–∞—Ä–∏–∞–Ω—Ç 3: –£–º–µ—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (30 –º–∏–Ω—É—Ç)
```env
# –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º
DELAY_HOURS=0.1                    # 6 –º–∏–Ω—É—Ç –¥–æ –ø–µ—Ä–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
REPEAT_INTERVAL_HOURS=0.15         # 9 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏  
TTL_HOURS=0.5                      # 30 –º–∏–Ω—É—Ç –æ–±—â–µ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏

# –¢–∏—Ö–∏–µ —á–∞—Å—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã
QUIET_START=23:59
QUIET_END=23:58
```

## üìã –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ .env —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–¥–Ω—É –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
nano .env
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Ä–∫–µ—Ä
systemctl restart pyrus-worker
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å webhook —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º (–∏–º–∏—Ç–∞—Ü–∏—è Pyrus)
curl -X POST http://195.133.81.197:8000/pyrus/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "event": "comment",
    "task": {
      "id": 99999,
      "subject": "–¢–ï–°–¢–û–í–ê–Ø –∑–∞–¥–∞—á–∞",
      "comments": [{
        "id": 888888,
        "text": "–¢–ï–°–¢: —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–∫—Ü–∏—è!",
        "create_date": "'$(date -u +%Y-%m-%dT%H:%M:%SZ)'",
        "author": {"id": 777, "first_name": "Test", "last_name": "Author"},
        "mentions": [164266775]
      }]
    },
    "actor": {"id": 777, "first_name": "Test", "last_name": "Author"}
  }'
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –≤–æ—Ä–∫–µ—Ä–∞
journalctl -u pyrus-worker -f

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—á–µ—Ä–µ–¥—å (–µ—Å–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –±–æ—Ç–µ)
# –í Telegram –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É: /queue
```

### 4. –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º webhook "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç—Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª"
curl -X POST http://195.133.81.197:8000/pyrus/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "event": "task_updated", 
    "task": {"id": 99999},
    "actor": {"id": 164266775, "first_name": "–í–∞—à–µ", "last_name": "–ò–º—è"},
    "change": {"kind": "field_changed"}
  }'
```

## ‚è∞ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –° –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –í–∞—Ä–∏–∞–Ω—Ç–∞ 1 (DELAY_HOURS=0.02):
- **–ß–µ—Ä–µ–∑ 1.2 –º–∏–Ω—É—Ç—ã**: –ü–µ—Ä–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
- **–ß–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã**: –í—Ç–æ—Ä–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- **–ß–µ—Ä–µ–∑ 4.8 –º–∏–Ω—É—Ç—ã**: –¢—Ä–µ—Ç—å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ  
- **–ß–µ—Ä–µ–∑ 6 –º–∏–Ω—É—Ç**: TTL –∏—Å—Ç–µ–∫–∞–µ—Ç, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–µ–∫—Ä–∞—â–∞—é—Ç—Å—è

### –° –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –í–∞—Ä–∏–∞–Ω—Ç–∞ 2 (DELAY_HOURS=0.005):
- **–ß–µ—Ä–µ–∑ 18 —Å–µ–∫—É–Ω–¥**: –ü–µ—Ä–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!
- **–ß–µ—Ä–µ–∑ 54 —Å–µ–∫—É–Ω–¥—ã**: –í—Ç–æ—Ä–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- **–ß–µ—Ä–µ–∑ 1.5 –º–∏–Ω—É—Ç—ã**: –¢—Ä–µ—Ç—å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- **–ß–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã**: TTL –∏—Å—Ç–µ–∫–∞–µ—Ç

## üîÑ –í–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–æ–¥–∞–∫—à–Ω –∑–Ω–∞—á–µ–Ω–∏—è:
```env
DELAY_HOURS=3
REPEAT_INTERVAL_HOURS=3
TTL_HOURS=24
QUIET_START=22:00
QUIET_END=09:00
```

```bash
systemctl restart pyrus-worker
```

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

**–î–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 1** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞ 5-10 –º–∏–Ω—É—Ç, –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã.
