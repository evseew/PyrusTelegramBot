# üìä Pyrus Dashboard - Next.js

–í–µ–±-–¥–∞—à–±–æ—Ä–¥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Pyrus API. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º –∏ —Ñ–∏–ª–∏–∞–ª–∞–º –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–∞–Ω–∞–ª–æ–≥ Excel-–æ—Ç—á–µ—Ç–æ–≤ –∏–∑ `final_fixed_report.py`).

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ü–æ–ª–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è Pyrus API** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–æ—Ä–º (5000+ –∑–∞–¥–∞—á)  
‚úÖ **–§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è UI  
‚úÖ **In-Memory –∫—ç—à** - –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏  
‚úÖ **3 –≤–∫–ª–∞–¥–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**:
  - üë¥ –í—ã–≤–æ–¥ —Å—Ç–∞—Ä–∏—á–∫–æ–≤ (—Ñ–æ—Ä–º–∞ 2304918)
  - üë∂ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ—Å–ª–µ –ë–ü–ó (—Ñ–æ—Ä–º–∞ 792300)
  - üè¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º

‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π** —Å –ø—Ä–∏–∑–∞–º–∏ (iPad, HonorPad, Tg Premium)  
‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥  
‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–π UI** –Ω–∞ Tailwind CSS

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd nextjs-dashboard
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ `nextjs-dashboard/`:

```env
PYRUS_LOGIN=your_email@example.com
PYRUS_SECURITY_KEY=your_security_key_here
PYRUS_API_URL=https://api.pyrus.com/v4/
```

> **–í–∞–∂–Ω–æ:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ credentials –∏–∑ –≤–∞—à–µ–≥–æ `.env` —Ñ–∞–π–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ PyrusTelegramBot

### 3. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000)

### 4. –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–∞—à–±–æ—Ä–¥–∞:
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–û–±–Ω–æ–≤–∏—Ç—å"** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (2-5 –º–∏–Ω—É—Ç –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–æ—Ä–º)
3. –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∑—è—Ç—Å—è

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
nextjs-dashboard/
‚îú‚îÄ‚îÄ lib/                          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ types.ts                  # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ pyrus-client.ts           # –ö–ª–∏–µ–Ω—Ç Pyrus API —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.ts               # –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö (–∞–Ω–∞–ª–æ–≥ Python)
‚îÇ   ‚îú‚îÄ‚îÄ cache.ts                  # –ö—ç—à-–º–µ–Ω–µ–¥–∂–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ helpers.ts                # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ api/                          # Next.js API Routes
‚îÇ   ‚îú‚îÄ‚îÄ sync/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ trigger.ts            # POST /api/sync/trigger - –∑–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ       ‚îú‚îÄ‚îÄ status.ts             # GET /api/data/status - —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ teachers.ts           # GET /api/data/teachers - –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
‚îÇ       ‚îî‚îÄ‚îÄ branches.ts           # GET /api/data/branches - –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª–∏–∞–ª–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ components/                   # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx             # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–∞—à–±–æ—Ä–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ TeachersTable.tsx         # –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ BranchesTable.tsx         # –¢–∞–±–ª–∏—Ü–∞ —Ñ–∏–ª–∏–∞–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ SyncStatus.tsx            # –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ app/                          # Next.js 13+ App Router
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                # Root layout
‚îÇ   ‚îî‚îÄ‚îÄ globals.css               # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ tailwind.config.js
‚îî‚îÄ‚îÄ README.md
```

---

## üîß API Endpoints

### 1. –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```bash
POST /api/sync/trigger
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ"
}
```

### 2. –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```bash
GET /api/data/status
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "is_syncing": false,
  "last_sync": "2025-10-03T12:00:00Z",
  "has_data": true,
  "is_stale": false,
  "progress": {
    "current_form": 2304918,
    "current_page": 15,
    "processed_tasks": 300
  }
}
```

### 3. –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π

```bash
GET /api/data/teachers
GET /api/data/teachers?group=oldies  # –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ä–∏—á–∫–∏
GET /api/data/teachers?group=trial   # –¢–æ–ª—å–∫–æ –ë–ü–ó
```

### 4. –î–∞–Ω–Ω—ã–µ —Ñ–∏–ª–∏–∞–ª–æ–≤

```bash
GET /api/data/branches
```

---

## üé® –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞
Pyrus API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ (–ø–æ 200 –∑–∞–¥–∞—á). –î–ª—è —Ñ–æ—Ä–º —Å 5000+ –∑–∞–¥–∞—á–∞–º–∏ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å 25+ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π `next_cursor`.

### –†–µ—à–µ–Ω–∏–µ

**–§–∞–π–ª:** `lib/pyrus-client.ts`

```typescript
async *iterateRegisterTasks(formId: number) {
  let cursor: string | null = null;
  
  while (true) {
    // –ó–∞–ø—Ä–æ—Å —Å –∫—É—Ä—Å–æ—Ä–æ–º
    const params = cursor ? { cursor } : {};
    const response = await fetch(`/forms/${formId}/register`, { params });
    
    const data = response.data;
    const tasks = data.tasks || [];
    
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∂–¥—É—é –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ generator
    for (const task of tasks) {
      yield task;  // ‚ö° –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    cursor = data.next_cursor;
    if (!cursor) break;  // –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    
    await new Promise(r => setTimeout(r, 100));  // Rate limiting
  }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
let count = 0;
for await (const task of client.iterateRegisterTasks(2304918)) {
  count++;
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–¥–∞—á—É –ë–ï–ó –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –≤ –ø–∞–º—è—Ç—å
}
```

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### –°—Ö–µ–º–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí POST /api/sync/trigger
                      ‚Üì
                –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç)
                      ‚Üì
                –û—Ç–≤–µ—Ç 202: "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞"
                      
–§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞:
  1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (is_syncing: true)
  2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PyrusClient
  3. –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—ã 2304918 (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
  4. –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—ã 792300 (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
  5. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
  6. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
  7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
  8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (is_syncing: false)

–§—Ä–æ–Ω—Ç–µ–Ω–¥:
  - –û–ø—Ä–∞—à–∏–≤–∞–µ—Ç GET /api/data/status –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å
  - –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Excel-–æ—Ç—á–µ—Ç–æ–º

| Excel –≤–∫–ª–∞–¥–∫–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | API Endpoint |
|---------------|-----------|--------------|
| –í—ã–≤–æ–¥ —Å—Ç–∞—Ä–∏—á–∫–æ–≤ | `TeachersTable` (type=oldies) | `/api/data/teachers?group=oldies` |
| –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ—Å–ª–µ –ë–ü–ó | `TeachersTable` (type=trial) | `/api/data/teachers?group=trial` |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º | `BranchesTable` | `/api/data/branches` |
| –î–µ—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º | *(–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)* | - |

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞

```bash
npm run dev

# –í –∫–æ–Ω—Å–æ–ª–∏ —É–≤–∏–¥–∏—Ç–µ:
üöÄ –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏...
üìä –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—ã 2304918 (—Å—Ç–∞—Ä–∏—á–∫–∏)...
  üìÑ form_2304918: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 1, –∑–∞–¥–∞—á 200
  üìÑ form_2304918: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 2, –∑–∞–¥–∞—á 200
  ...
‚úÖ –§–æ—Ä–º–∞ 2304918: –≤—Å–µ–≥–æ 500, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ 450, –∏—Å–∫–ª—é—á–µ–Ω–æ 10
üìä –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—ã 792300 (–Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç)...
‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω –∑–∞ 45.23 —Å–µ–∫—É–Ω–¥
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∫—ç—à
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API

```bash
# –°—Ç–∞—Ç—É—Å
curl http://localhost:3000/api/data/status

# –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏
curl http://localhost:3000/api/data/teachers | jq '.teachers | length'

# –§–∏–ª–∏–∞–ª—ã
curl http://localhost:3000/api/data/branches | jq '.branches[0]'
```

---

## üö¢ –î–µ–ø–ª–æ–π –Ω–∞ production

### 1. Vercel (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Vercel CLI
npm i -g vercel

# –î–µ–ø–ª–æ–π
cd nextjs-dashboard
vercel

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Environment Variables –≤ Vercel Dashboard:
# PYRUS_LOGIN, PYRUS_SECURITY_KEY, PYRUS_API_URL
```

### 2. Docker

```dockerfile
# Dockerfile (—Å–æ–∑–¥–∞–π—Ç–µ –≤ nextjs-dashboard/)
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci --production
COPY . .
RUN npm run build

EXPOSE 3000
CMD ["npm", "start"]
```

```bash
docker build -t pyrus-dashboard .
docker run -p 3000:3000 \
  -e PYRUS_LOGIN=your_email \
  -e PYRUS_SECURITY_KEY=your_key \
  pyrus-dashboard
```

### 3. VPS (Ubuntu)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git clone <your-repo>
cd nextjs-dashboard
npm install
npm run build

# PM2 –¥–ª—è production
npm install -g pm2
pm2 start npm --name "pyrus-dashboard" -- start
pm2 save
pm2 startup
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env.local` –≤ git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è credentials
- –î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è production (NextAuth.js)
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ API Routes —á–µ—Ä–µ–∑ middleware

---

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–æ—Ä–º

### –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞:** 60 —Å–µ–∫—É–Ω–¥
- **Rate limiting:** 100ms –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- **–ö—ç—à:** In-memory (–¥–∞–Ω–Ω—ã–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ)

### –î–ª—è production

1. **–î–æ–±–∞–≤—å—Ç–µ Redis** –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ –∫—ç—à–∞
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ cron** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ webhooks Pyrus** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
4. **–î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏

---

## üÜò –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
**–†–µ—à–µ–Ω–∏–µ:** –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å" –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (2-5 –º–∏–Ω—É—Ç)

### –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Pyrus
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `PYRUS_LOGIN` –∏ `PYRUS_SECURITY_KEY` –≤ `.env.local`

### –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–æ–ª—å—à–∏—Ö —Ñ–æ—Ä–º
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –≤ `pyrus-client.ts` (—Å—Ç—Ä–æ–∫–∞ 98)

---

## üîÆ Roadmap

- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel (–∞–Ω–∞–ª–æ–≥ Python —Å–∫—Ä–∏–ø—Ç–∞)
- [ ] –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã (Chart.js)
- [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (NextAuth.js)
- [ ] WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] Redis –∫—ç—à –¥–ª—è production
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.

---

**–°–æ–∑–¥–∞–Ω–æ –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Python-—Å–∫—Ä–∏–ø—Ç—É `final_fixed_report.py`** üöÄ

